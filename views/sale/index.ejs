<!DOCTYPE html>
<html lang="en">
  <head>
    <% include ../partial/head %>
    <link rel="stylesheet" href="/stylesheets/dataTables.bootstrap5.css" />
  </head>
  <body>
    <!-- Start Homepage section-->
    <div class="wrapper">
      <!-- Sidebar -->
      <% include ../partial/sidebar %>
      <div class="main">
        <nav class="navbar navbar-expand px-3 border-bottom">
          <!--Button for sidebar toggle-->
          <button class="btn" type="button" data-bs-theme="dark">
            <span class="navbar-toggler-icon"></span>
          </button>
        </nav>
        <main class="content px-3 py-2">
          <div class="container-fluid">
            <div class="mb-3">
              <h1>Sale List</h1>

              <div class="container-fluid mt-3">
                <div
                  class="mb-3 mt-3"
                  style="
                    justify-content: center;
                    padding-top: 4px;
                    padding-top: 8px;
                  "
                >
                  <a href="/sale/salevoucher">
                    <button
                      type="button"
                      class="col-lg-2 form-control bg-info"
                      style="width: 100px"
                    >
                      Add new
                    </button></a
                  >
                </div>
                <div class="table-responsive">
                  <table
                    class="table table-bordered table-info display"
                    id="example"
                    style="width: 100%"
                  >
                    <thead>
                      <tr>
                        <th>No</th>
                        <th>Date</th>
                        <th>Slip No</th>
                        <th>Qunatity</th>
                        <th>Amount</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% for(var i = 0; i < sales.length;i++){%>
                      <tr>
                        <td><%= i+1 %></td>
                        <td><%= sales[i].dateStr %></td>
                        <td><%= sales[i].slipNo %></td>
                        <td>
                          <%= sales[i].list.reduce((n, {qty}) => n + qty, 0) %>
                        </td>
                        <td><%= sales[i].grandAmount %></td>
                        <td>
                          <a
                            href="/sale/voucherDetail/<%= sales[i]._id%>"
                            class="btn btn-primary"
                            >Detail</a
                          >
                        </td>
                      </tr>
                      <%}%>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
  </body>
  <% include ../partial/script %>
  <script src="/javascripts/dataTables.js"></script>
  <script src="/javascripts/dataTables.bootstrap5.js"></script>
  <script>
    new DataTable("#example");
  </script>
</html>
